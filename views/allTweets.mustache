<html lang="en">
	<head>
		<title>{{title}}</title>
            <meta 	charset="UTF-8">
            <meta 	name="description" 	content="Twitter Feed">
            <meta 	name="keywords"    	content="allTweets,Themistoklis Theologitis , twf">
            <meta 	name="author" 		content="Themistoklis Theologitis">
	    	<meta 	name="viewport" 	content="width=device-width,initial-scale=1">
	    	<script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
	    	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
			<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
			<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
			<script src="js/bootstrap.min.js"></script>
			<script src="js/allTweets.js"></script>
	    	<link 	href="css/bootstrap.min.css" rel="stylesheet"> 
	    	<link 	href="css/allTweets.css" 	rel ="stylesheet" type="text/css">	 
	    	<link   href="css/languages.min.css" rel ="stylesheet" type="text/css">

	</head>

	<body>
		<header>
			<div class="navbar navbar-inverse navbar-fixed-top" role="navigation" id="slide-nav">
			   	<div class="navbar-header">
				    <a class="navbar-toggle"> 
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
				    <a class="navbar-brand" href="/home">Twitter Feed</a>
				    <img id="top_logo" src="../images/logo_tw_40.png" alt="Twitter Logo">
			   	</div>

			   	<div id="main_menu">
			   	
			    	<form id="search_form" role="search" action="javascript:search();">
			    		<input type="hidden" id="_csrf" name="_csrf" value={{csrfToken}}>
			    		<div id="search_bar_left">
			    			<input id="search_bar_item" type="text" class="form-control" placeholder="Search">
			    		</div>
				        <div id="search_bar_button">
				        	<button id="search_button" type="submit" class="btn btn-success">
					    		<span class="glyphicon glyphicon-search"></span>
					    	</button>
				        </div>
					</form>
					<div id="navbarCollapse" class="collapse navbar-collapse">
			            <ul id="nav-navbar-nav" class="nav navbar-nav">
			                <li ><a href="/home">Home</a></li>
			                <li class="active"><a href="/allTweets">All Tweets</a></li>
					        <li class="dropdown">
								<a href="#" class="dropdown-toogle" data-toggle = "dropdown"> {{user}} <b class="caret"></b></a>
								<ul id="dropdownMenu" class = "dropdown-menu">
					                <li><a href="javascript:window.location.href= '/edit_profile';" target="_blank">Edit Profile</a></li>
					                <li><a href="javascript:window.location.href= '/logout';" target="_blank">Logout</a></li>
					            </ul>
					        </li>
			                <li><a href="#" target="_blank">About</a></li>
			            </ul>
			        </div>
			    </div>
			   	
			</div>
		</header>

		<div id="main" class="main">
			
			<div id="slidemenu">
				<form id="search_form_slidemenu" role="search" action="#">
		    		<div id="search_bar_left_slidemenu">
		    			<input id="search_bar_item_slidemenu" type="text" class="form-control" placeholder="Search">
		    		</div>
			        <div id="search_bar_button_slidemenu">
			        	<button id="search_button_slidemenu" type="submit" class="btn btn-success">
				    		<span class="glyphicon glyphicon-search"></span>
				    	</button>
			        </div>
				</form>
				<div id="filter_menu">
					
				</div>
				
			</div>
			
			<div id="filter_window" class="filter_window">
				<div class="panel-group">
					<div id="panel0" class="panel">
					    <div class="panel">
					      <h4 id="filterOrderBy">
					        <a data-toggle="collapse" data-parent="#accordion" href="#collapseOrder">
					        	<span class="caret"></span>
					          	<span>Order By</span>
					        </a>
					      </h4>
					    </div>
						<div id="collapseOrder" class="panel-collapse collapse in">
					      <div class="panel-body">
								<div id="option_box">
									<ul id="filter_list" class="list-unstyled" data-type="ZOOM7">
										<li id="Retweeted">
											<a id="Retweeted_a" class="filter-item" href="javascript:orderBy_retweets()">
												<span id='Retweeted_span' class='glyphicon glyphicon-arrow-up'>Retweets</span>
												<script>
													var myParam = location.search.split('order=')[1];
													if (myParam == 'retweets')
													{
														document.getElementById('Retweeted_span').style.color = 'gray';
														document.getElementById('Retweeted_span').style.pointerEvents = 'none';	
													}
													else
													{
														document.getElementById('Retweeted_span').style.color = 'white';
														document.getElementById('Retweeted_span').style.pointerEvents = 'auto';
													}
												</script>
											</a>
										</li>
										<li id="Popular">
											<a id="Popular_a" class="filter-item" href="javascript:orderBy_favorites()">
												<span id='Favorites_span' class='glyphicon glyphicon-arrow-up'>Favorites</span>
												<script>
													var myParam = location.search.split('order=')[1];
													if (myParam == 'favorites')
													{
														document.getElementById('Favorites_span').style.color = 'gray';
														document.getElementById('Favorites_span').style.pointerEvents = 'none';	
													}
													else
													{
														document.getElementById('Favorites_span').style.color = 'white';
														document.getElementById('Favorites_span').style.pointerEvents = 'auto';
													}
												</script>
											</a>
										</li>
										<li id="DateUp">
											<a id="DateUp_a" class="filter-item" href="javascript:orderBy_dateUp()">
												<span id='DateUpspan' class='glyphicon glyphicon-arrow-up'>Date</span>
												<script>
													var myParam = location.search.split('order=')[1];
													if ((myParam == 'dateDown')||(myParam == 'favorites')||(myParam == 'retweets'))
													{
														document.getElementById('DateUpspan').style.color = 'white';
														document.getElementById('DateUpspan').style.pointerEvents = 'auto';
													}
													else
													{
														document.getElementById('DateUpspan').style.color = 'gray';
														document.getElementById('DateUpspan').style.pointerEvents = 'none';
													}
												</script>
											</a>
										</li>
										<li id="DateDown">
											<a id="DateDown_a" class="filter-item" href="javascript:orderBy_dateDown()">
												<span id='DateDownspan' class='glyphicon glyphicon-arrow-down'>Date</span>
												<script>
													var myParam = location.search.split('order=')[1];
													if (myParam == 'dateDown')
													{
														document.getElementById('DateDownspan').style.color = 'gray';
														document.getElementById('DateDownspan').style.pointerEvents = 'none';	
													}
													else
													{
														document.getElementById('DateDownspan').style.color = 'white';
														document.getElementById('DateDownspan').style.pointerEvents = 'auto';
													}
												</script>
											</a>
										</li>
									</ul>
								</div>
					      </div>
					    </div>
					</div>

					<div id="panel1" class="panel">
					    <div class="panel">
					      <h4 id="filterBy_title">
					        <a data-toggle="collapse" data-parent="#accordion" href="#collapseFilters">
					        	<span class="caret"></span>
					          	<span>Remove Filters</span>
					        </a>
					      </h4>
					    </div>
						<div id="collapseFilters" class="panel-collapse collapse">
					      <div class="panel-body">
								<div id="option_box">
									<ul id="filter_list" class="list-unstyled" data-type="ZOOM7">
												{{#load_options}}
													<li id="flist">
														<a id="{{filter}}" class="filter-item" href="javascript:remove_filter('{{filter}}');">
															<i class="chkbox"></i>
															<span>{{filter}}</span>
														</a>
													</li>
												{{/load_options}}
												<!--x2718, x274C-->
									</ul>
								</div>
								<div id="removeAll_div">
									<a id="RemoveAll" class="filter-item" href="javascript:remove_all();">
										<i class="chkbox"></i>
										<span>Select All</span>
									</a>
									<button id="remove_button" onclick="remove_filters()" class="btn btn-danger btn-xs" data-title="Remove" data-toggle="modal" ><span class="glyphicon glyphicon-trash"></span></button>
								</div>
					      </div>
					    </div>
					</div>

					<div id="panel2" class="panel">
					    <div class="panel">
					      <h4 id="filterBy_title">
					        <a data-toggle="collapse" data-parent="#accordion" href="#collapseUsers">
					        	<span class="caret"></span>
					          	<span>Users</span>
					        </a>
					      </h4>
					    </div>
						<div id="collapseUsers" class="panel-collapse collapse">
					      <div class="panel-body">
								<div id="option_box">
									<ul id="filter_list" class="list-unstyled" data-type="ZOOM7">
												{{#users}}
													<li id="flist">
														<a id="{{screen_name}}" class="filter-item" href="javascript:filterByUser('{{screen_name}}');">
															<i class="chkbox"></i>
															<span>{{screen_name}}</span>
														</a>
													</li>
												{{/users}}
												<!--x2718, x274C-->
									</ul>
								</div>
								<button id="submitUsers_button" onclick="submitUsers()" class="btn btn-danger btn-xs" data-title="Submit" data-toggle="modal" ><span class="glyphicon glyphicon-circle-arrow-right"></span></button>
					      </div>
					    </div>
					</div>

					<div id="panel3" class="panel">
					    <div class="panel">
					      <h4 id="filterBy_HashTag">
					        <a data-toggle="collapse" data-parent="#accordion" href="#collapseHashtags">
					        	<span class="caret"></span>
					          	<span>Hashtags</span>
					        </a>
					      </h4>
					    </div>
						<div id="collapseHashtags" class="panel-collapse collapse">
					      <div class="panel-body">
								<div id="option_box">
									<ul id="hashtag_list" class="list-unstyled" data-type="ZOOM7">
											{{#hash}}	
													<li id="flist">
														<a id="#{{.}}" class="filter-item" href="javascript:filterByHashtag('{{.}}');">
															<i class="chkbox"></i>
															<span>{{.}}</span>
														</a>
													</li>
											{{/hash}}
												<!--x2718, x274C-->
									</ul>
								</div>
								<button id="submitHashtag_button" onclick="submitHashtag()" class="btn btn-danger btn-xs" data-title="Submit" data-toggle="modal" ><span class="glyphicon glyphicon-circle-arrow-right"></span></button>
					      </div>
					    </div>
					</div>

					<div id="panel4" class="panel">
					    <div class="panel">
					      <h4 id="filterBy_Date">
					        <a data-toggle="collapse" data-parent="#accordion" href="#collapseDate">
					        	<span class="caret"></span>
					          	<span>Date</span>
					        </a>
					      </h4>
					    </div>
						<div id="collapseDate" class="panel-collapse collapse">
							<div class="panel-body">
							    <form id="calendar">
								    <input id="datepicker" value="dd/mm/yyyy"/>
								</form>
								<button id="submitDate_button" onclick="submitDate()" class="btn btn-danger btn-xs" data-title="Submit" data-toggle="modal" ><span class="glyphicon glyphicon-circle-arrow-right"></span></button>
							</div>
					      	<script>
								$(document).ready(function() {
									$("#datepicker").datepicker({ dateFormat: 'dd/mm/yy' });
								});
						  	</script>
						</div>
					</div>
				</div>				
			</div>

			<div id="tweet_window" class="tweet_window">
				<script type="text/javascript">
					var load_length ;
					$(document).ready(function () {
					    load_length = $("#main").height();
					    $('#main').on('scroll', function() {
				            if($(this).scrollTop() >= load_length-300) {
				            	load_length += 300;
				                var options = window.location.href.split('?');
				                $.ajax({
				                    type: 'GET',
				                    url: 'http://localhost:3000/load_tweets?'+options[1],
				                    success: function(result){
								        for (var i=0;i<result.length;i++)
								        {
								        	var text = "<div id="+"twits"+">"+"<div id="+"retweet"+">"+"</div>"+"<div id="+"down"+">"+"<div id="+"img"+">"+"<img id="+"profile_img" +" src="+result[i].profile_img+">"+"</div>"+"<div id="+"right_tw"+">"+"<div id="+"user_username_time"+">"+"<p id="+"username"+">"+"<b>"+result[i].screen_name+"</b>"+"</p>"+"<p id="+"screenname"+">@"+result[i].user+"</p>"+"<p id="+"tweet_date"+">"+result[i].created_at+"</p>"+"</div>"+"<div id="+"text"+">"+"<p id="+"tweet_text"+">"+result[i].text+"</p>"+"</div>"+"</div>"+"</div>"+"<div id="+"favRt>"+"<img id="+"fav_icon"+" onmouseover=\"hoverFAV(this);\""+" onmouseout=\"unhoverFAV(this);\""+" src=\"../images/heart_0.png\">"+"<span id=\"fav_count\" onmouseover=\"this.style.color='red'\" onmouseout=\"this.style.color='black'\">"+result[i].favorite_count+"</span>"+"<img id=\"rt_icon\" onmouseover=\"hoverRT(this);\" onmouseout=\"unhoverRT(this);\" src=\"../images/rt.png\""+">"+"<span id=\"rt_count\" onmouseover=\"this.style.color='#19cf86'\" onmouseout=\"this.style.color='black'\">"+result[i].retweet_count+"</span>"+"</div>"+"</div";
							                var element = document.createElement("div");							                
							                element.id  = "twits";
							                element.innerHTML = text;
							                document.getElementById('tweet_window').appendChild(element);
								        }
								    }
				                });
				            }    
					    });
					});
				</script>
				
			   	{{#tweet_data}}

			   		<div id="twits">
	    				<div id="retweet">

	    				</div>

	    				<div id="down">
	    					<div id="img">
	    						<img id="profile_img" src={{profile_img}}>
		    				</div>

		    				<div id="right_tw">
		    					<div id="user_username_time">
									<p id="username"><b> {{screen_name}} </b></p>
									<p id="screenname">@{{user}}</p>
									<p id="tweet_date">{{created_at}}</p>
			    				</div>

			    				<div id="text">
	    							<p id="tweet_text">{{text}} </p>
			    				</div>
		    				</div>
		    			</div>
		    			<div id="favRt">
		    				<img id="fav_icon" onmouseover="hoverFAV(this);" onmouseout="unhoverFAV(this);" src="../images/heart_0.png">
		    				<span id="fav_count" onmouseover="this.style.color='red'" onmouseout="this.style.color='black'">{{favorite_count}}</span>
		    				<img id="rt_icon" onmouseover="hoverRT(this);" onmouseout="unhoverRT(this);" src="../images/rt.png">
		    				<span id="rt_count" onmouseover="this.style.color='#19cf86'" onmouseout="this.style.color='black'">{{retweet_count}}</span>
		    			</div>
		    		</div>
			    {{/tweet_data}}
			</div>
		</div>

		<footer>
			<div id="left_footer">
				<span class="lang-xs" lang="en"></span>	
			</div>
			<div id="right_footer">
				<p>© Copyright 2015 Theologitis Themistoklis. All Rights Reserved</p>	
			</div>
		</footer>
	</body>
</html>